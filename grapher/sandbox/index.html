<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="UTF-8" />
        <title>Grapher Sandbox</title>
        <link
            href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700,700i|Playfair+Display:400,700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="http://localhost:8090/css/commons.css" />
        <link rel="stylesheet" href="http://localhost:8090/css/owid.css" />
    </head>
    <body class="ChartPage">
        <main>
            <figure data-grapher-src=""></figure>
        </main>
        <script src="http://localhost:8090/js/commons.js"></script>
        <script src="http://localhost:8090/js/owid.js"></script>
        <script src="grapher.js"></script>
        <script>
            if (typeof sandboxGrapher === "undefined")
                alert(
                    "To use the Sandbox, first paste a Grapher object into 'sandbox/grapher.js'. A sample is provided for you in 'sandbox/grapher.sample.js'"
                )
            const figure = document.getElementsByTagName("figure")[0]

            try {
                const view = window.GrapherView.bootstrap({
                    jsonConfig: sandboxGrapher,
                    containerNode: figure,
                    queryStr: window.location.search,
                })
                view.bindToWindow()
            } catch (err) {
                figure.innerHTML =
                    "<p>Unable to load interactive visualization</p>"
                figure.setAttribute("id", "fallback")
                throw err
            }
        </script>
    </body>
</html>
